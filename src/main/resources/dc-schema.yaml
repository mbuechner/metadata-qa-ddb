format: xml
fields:
  - name: recordId
    path: oai:record/dc:identifier[@type='providerItemId']
    extractable: true
    rules:
      - and:
        - minCount: 1
        - minLength: 1
        failureScore: -9
        id: 1.1
      - unique: true
        failureScore: -9
        id: 1.2
      - pattern: ^[\p{Alpha}\d\.]+$
        successScore: 3
        id: 1.5
  - name: providerid
    path: oai:record/dc:identifier[@type='providerid']
    rules:
      - and:
          - minCount: 1
          - minLength: 1
        failureScore: -6
        id: 2.1
      - pattern: ^(DE-\d+|DE-MUS-\d+|http://id.zdb-services.de\w+|\d{8}|oai\d{13}|http://d-nb.info/gnd/\w+)$
        failureScore: -3
        id: 2.2
      - pattern: ^(DE-\d+|DE-MUS-\d+|http://id.zdb-services.de\w+)$
        successScore: 6
        id: 2.4
      - pattern: ^http://id.zdb-services.de\w+$
        successScore: 3
        id: 2.5
      - pattern: ^http://d-nb.info/gnd/\w+$
        successScore: 3
        id: 2.6
  - name: thumbnail
    path: oai:record/dc:identifier[@type='binary']
    rules:
      - or:
        - pattern: ^.*\.(jpg|jpeg|jpe|jfif|png|tiff|tif|gif|svg|svgz|pdf)$
        - contentType: [image/jpeg, image/png, image/tiff, image/tiff-fx, image/gif, image/svg+xml, application/pdf]
        id: 3.1
  - name: url
    path: //oai:metadata/oai:record/dc:identifier[@type='URL']
#  - name: dc:identifier
#    path: //oai:metadata/oai:record/dc:identifier
#  - name: dc:type
#    path: //oai:metadata/oai:record/dc:type
#  - name: dc:date
#    path: //oai:metadata/oai:record/dc:date
  - name: dc:title
    path: oai:record/dc:title
#    extractable: true
    rules:
      - pattern: ^.+$
        failureScore: -2
      - minCount: 1
        failureScore: -2
#  - name: dc:identifier
#    path: //oai:metadata/oai:record/dc:identifier
  - name: rights
    path: oai:record/dc:rights[@type='binary']
  - name: dc:rights
    path: oai:record/dc:rights
  - name: dc:identifier
    path: oai:record/dc:identifier
  - name: dc:contributor
    path: oai:record/dc:contributor
  - name: dc:creator
    path: oai:record/dc:creator
  - name: dc:relation
    path: oai:record/dc:relation
  - name: dc:language
    path: oai:record/dc:language
  - name: dcterms:created
    path: oai:record/dcterms:created
  - name: dcterms:location
    path: oai:record/dcterms:location
  - name: dcterms:extent
    path: oai:record/dcterms:extent
  - name: dcterms:medium
    path: oai:record/dcterms:medium
namespaces:
  doc: http://www.lyncode.com/xoai
  foaf: http://xmlns.com/foaf/0.1/
  europeana: http://www.europeana.eu/schemas/ese/
  dcterms: http://purl.org/dc/terms/
  dc: http://purl.org/dc/elements/1.1/
